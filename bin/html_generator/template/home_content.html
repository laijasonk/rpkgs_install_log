
            <h1>Install and IV</h1>

            <h2>Description</h2>

            <p>A series of BASH scripts that can be used to install R packages onto any system with R and verify the results of the installation commands in a multi-page HTML log. The scripts aim to accomplish the following tasks:</p>

            <div class="log" style="height: auto; padding: 0.5em">
                <ul style="line-height: 175%;">
                    <li><strong>Specify</strong> which R packages (and version) should be installed</li>
                    <li><strong>Download</strong> specified R packages
                        <ul style="font-size: smaller;">
                            <li>Source type can be URLs to bundled build archives (tar.gz)</li>
                            <li>Source type can be URLs to source code in archives (zip, tar.gz, tar.bz2, or rar)
                                <ul>
                                    <li>Archive source files are extracted</li>
                                    <li>Extracted source directories are bundled into build tar.gz files</li>
                                </ul>
                            </li>
                            <li>Source type can be git repo URLs with commit SHA
                                <ul>
                                    <li>Git repos are cloned</li>
                                    <li>Commits are checked out according to the SHA hash</li>
                                    <li>Source code are bundled into build tar.gz files</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li><strong>Build</strong>, <strong>check</strong>, and <strong>install</strong> every specified package build
                        <ul style="font-size: smaller;">
                            <li>Build: converts a package source directory into a single bundled tar.gz</li>
                            <li>Check: performs checks on source packages using all known best practices</li>
                            <li>Install: installs the packages to the target rlibs directory</li>
                        </ul>
                    </li>
                    <li><strong>Test</strong> every installed package with unit testing (requires testthat)</li>
                    <li><strong>Verify</strong> the results and status in an automatically-generated HTML log</li>
                </ul>
            </div>

            <p class="space-below">These scripts currently only support GNU/Linux systems with GNU coreutils installed. Depending on the package input specifications, other system tools that may need to be available are "wget" and "git". The "testthat" R library has to be installed if unit testing is turned on when running the scripts.</p>

            <h2>Example</h2>

            <p>To run the full pipeline for downloading, building, checking, installing, and testing all packages, use the provided "full_install.sh" script. This script takes an input CSV file that contains all the package specifications/instructions and installs it into a target rlibs directory. With the exception of the input CSV, all option flags are option.</p>

            <p>A full list of the options plus descriptions are shown when running "full_install.sh" with the "-h" flag. The default help message is shown below.</p>
 
            <div class="log" style="height: auto;">
<pre>Usage: ./full_install.sh -i input.csv
       ./full_install.sh -i input.csv [-l /usr/lib64/R/library]
       ./full_install.sh -i input.csv [-b /usr/bin/R] [-s /usr/bin/Rscript]
       ./full_install.sh -i input.csv [-c] [-t]
       ./full_install.sh -i input.csv [-o ./]
Flags:
       -i input csv containing release packages
       -l OPTIONAL libpaths to build on (separated by colon on GNU/Linux)
       -b OPTIONAL path to R binary
       -s OPTIONAL path to Rscript executable
       -c OPTIONAL enable and run checks (disabled by default)
       -t OPTIONAL enable and run unit tests (disabled by default)
       -o OPTIONAL target directory (default: current directory)</pre>
            </div>

            <p>Following the guideline provided in the help message above, a full installation can be run with the following command:</p>
            
            <div class="log" style="height: auto;">
<pre>./full_install.sh \
    -i examples/NEST_363_release_subset.csv \
    -l /usr/lib64/R/library
    -b /usr/bin/R \
    -s /usr/bin/Rscript \
    -c -t
    -o ./example_test</pre>
            </div>
		
            <p>The above command will run the full pipeline using the input CSV, include only the libraries in /usr/lib64/R/library, use the specified R and Rscript executables, run checks on all packages, run unit tests on all packages, and ultimately install the packages into a directory called ./example_test in the the current path.</p> 

